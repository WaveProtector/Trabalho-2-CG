<!DOCTYPE html>
<html>

<head>
    <title>Projeto</title>
    <meta http-equiv="content-type" content="text/html; charset=windows-1252">
    <script src="./twgl.js/twgl.js-master/dist/5.x/twgl-full.js"></script>
</head>

<body>
    <canvas id="canvas" width: 100vw; height: 100vh; display: block;></canvas>
</body>
<script id="vs" type="notjs">
            uniform mat4 u_worldViewProjection;

            attribute vec4 position;
            attribute vec2 texcoord;
            attribute vec3 normal;

            varying vec4 v_pos;
            varying vec2 v_texCoord;
            
            void main() {
                v_pos = u_worldViewProjection * position;
                v_texCoord = texcoord;
                gl_Position = v_pos;
            }
            
      </script>
<script id="fs" type="notjs">
            precision mediump float;
            varying vec2 v_texCoord;
            uniform sampler2D textura;

            void main() {
            gl_FragColor = 0.2*vec4(0.0, 0.0, 0.0, 1.0) + 0.8*texture2D(textura, v_texCoord); //textura com luz ambiente
            }
      
      </script>
<script>

    const canvas = document.querySelector("canvas");
    canvas.width = 1500;
    canvas.height = 740;

    const m4 = twgl.m4;
    const gl = document.querySelector("canvas").getContext("webgl");
    const programInfo = twgl.createProgramInfo(gl, ["vs", "fs"]);

    const bufferInfoSol = twgl.primitives.createSphereBufferInfo(gl, 0.7, 36, 24);
    const bufferInfoTerra = twgl.primitives.createSphereBufferInfo(gl, 0.25, 36, 24);
    const bufferInfoLua = twgl.primitives.createSphereBufferInfo(gl, 0.0675, 36, 24);
    const bufferInfoMercurio = twgl.primitives.createSphereBufferInfo(gl, 0.15, 36, 24);
    const bufferInfoVenus = twgl.primitives.createSphereBufferInfo(gl, 0.28, 36, 24);
    const bufferInfoMarte = twgl.primitives.createSphereBufferInfo(gl, 0.15, 36, 24);
    var texSol = twgl.createTexture(gl, { src: 'sun.jpg' });
    var texTerra= twgl.createTexture(gl, { src: 'terra.jpg' });
    var texLua = twgl.createTexture(gl, { src: 'lua.jpg' });
    var texMercurio = twgl.createTexture(gl, { src: 'mercury.jpg' });
    var texVenus = twgl.createTexture(gl, { src: 'venus.jpg' });
    var texMarte = twgl.createTexture(gl, { src: 'mars.jpg' });



    var uniforms = {};

    function render(time) {
        time = time * 0.001;
        twgl.resizeCanvasToDisplaySize(gl.canvas);
        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);

        gl.enable(gl.DEPTH_TEST);
        gl.clearColor(0, 0, 0, 1);
        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

        //Parte da projeção
        const fov = 30 * Math.PI / 180;
        const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;
        const zNear = 0.5;
        const zFar = 50;
        const projection = m4.perspective(fov, aspect, zNear, zFar);

        //Parte da visualização
        const eye = [0, 10, -10];
        const target = [0, 0, 0];
        const up = [0, 1, 0];
        const camera = m4.lookAt(eye, target, up);
        const view = m4.inverse(camera);

        //Sol
        var viewProjection = m4.multiply(projection, view);
        var world = m4.identity();
        //m4.translate(world, [-3, 0, 0], world);
        //m4.rotateX(world, 1.5, world);
        m4.rotateY(world, time * 0.04, world);
        uniforms.u_world = world;
        uniforms.u_worldViewProjection = m4.multiply(viewProjection, world);
        uniforms.textura = texSol;

        //Desenha o sol
        gl.useProgram(programInfo.program);
        twgl.setBuffersAndAttributes(gl, programInfo, bufferInfoSol);
        twgl.setUniforms(programInfo, uniforms);
        twgl.drawBufferInfo(gl, bufferInfoSol);

        //Terra
        viewProjection = m4.multiply(projection, view);
        world = m4.identity();
        //m4.rotateX(world, 1.5, world);
        m4.rotateY(world, time * 0.5, world);
        m4.translate(world, [-5, 0, 0], world);
        m4.rotateY(world, time * 1, world);
        uniforms.u_world = world;
        uniforms.u_worldViewProjection = m4.multiply(viewProjection, world);
        uniforms.textura = texTerra;

        //Desenha a terra
        gl.useProgram(programInfo.program);
        twgl.setBuffersAndAttributes(gl, programInfo, bufferInfoTerra);
        twgl.setUniforms(programInfo, uniforms);
        twgl.drawBufferInfo(gl, bufferInfoTerra);

        //Lua
        viewProjection = m4.multiply(projection, view);
        world = m4.identity();
        //m4.rotateX(world, 1.5, world);
        m4.rotateY(world, time * 0.5, world);
        m4.translate(world, [-5, 0, 0], world);
        m4.rotateY(world, time * 1, world);
        m4.translate(world, [-1.1, 0, 0], world);
        
        uniforms.u_world = world;
        uniforms.u_worldViewProjection = m4.multiply(viewProjection, world);
        uniforms.textura = texLua;

        //Desenha a lua
        gl.useProgram(programInfo.program);
        twgl.setBuffersAndAttributes(gl, programInfo, bufferInfoLua);
        twgl.setUniforms(programInfo, uniforms);
        twgl.drawBufferInfo(gl, bufferInfoLua);

        //Mercurio
        viewProjection = m4.multiply(projection, view);
        world = m4.identity();
        //m4.rotateX(world, 1.5, world);
        m4.rotateY(world, time * 1, world);
        m4.translate(world, [-2, 0, 0], world);
        m4.rotateY(world, time * 1, world);
        uniforms.u_world = world;
        uniforms.u_worldViewProjection = m4.multiply(viewProjection, world);
        uniforms.textura = texMercurio;

        //Desenha mercurio
        gl.useProgram(programInfo.program);
        twgl.setBuffersAndAttributes(gl, programInfo, bufferInfoMercurio);
        twgl.setUniforms(programInfo, uniforms);
        twgl.drawBufferInfo(gl, bufferInfoMercurio);

        //Venus
        viewProjection = m4.multiply(projection, view);
        world = m4.identity();
        //m4.rotateX(world, 1.5, world);
        m4.rotateY(world, time * 0.8, world);
        m4.translate(world, [-3, 0, 0], world);
        m4.rotateY(world, time * 1, world);
        uniforms.u_world = world;
        uniforms.u_worldViewProjection = m4.multiply(viewProjection, world);
        uniforms.textura = texVenus;

        //Desenha venus
        gl.useProgram(programInfo.program);
        twgl.setBuffersAndAttributes(gl, programInfo, bufferInfoVenus);
        twgl.setUniforms(programInfo, uniforms);
        twgl.drawBufferInfo(gl, bufferInfoVenus);

        //Marte
        viewProjection = m4.multiply(projection, view);
        world = m4.identity();
        //m4.rotateX(world, 1.5, world);
        m4.rotateY(world, time * 0.3, world);
        m4.translate(world, [-7, 0, 0], world);
        m4.rotateY(world, time * 1, world);
        uniforms.u_world = world;
        uniforms.u_worldViewProjection = m4.multiply(viewProjection, world);
        uniforms.textura = texMarte;

        //Desenha marte
        gl.useProgram(programInfo.program);
        twgl.setBuffersAndAttributes(gl, programInfo, bufferInfoMarte);
        twgl.setUniforms(programInfo, uniforms);
        twgl.drawBufferInfo(gl, bufferInfoMarte);

        requestAnimationFrame(render);
    }
    requestAnimationFrame(render);
</script>

</html>